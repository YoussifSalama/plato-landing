{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/src/lib/server/email.ts"],"sourcesContent":["// SendGrid integration for sending booking confirmation emails\nimport sgMail from '@sendgrid/mail';\n\nlet connectionSettings: any;\n\nasync function getCredentials() {\n  const hostname = process.env.REPLIT_CONNECTORS_HOSTNAME;\n  const xReplitToken = process.env.REPL_IDENTITY\n    ? 'repl ' + process.env.REPL_IDENTITY\n    : process.env.WEB_REPL_RENEWAL\n    ? 'depl ' + process.env.WEB_REPL_RENEWAL\n    : null;\n\n  if (!xReplitToken) {\n    throw new Error('X-Replit-Token not found for repl/depl');\n  }\n\n  connectionSettings = await fetch(\n    'https://' + hostname + '/api/v2/connection?include_secrets=true&connector_names=sendgrid',\n    {\n      headers: {\n        'Accept': 'application/json',\n        'X-Replit-Token': xReplitToken,\n      },\n    }\n  ).then(res => res.json()).then(data => data.items?.[0]);\n\n  if (!connectionSettings || (!connectionSettings.settings.api_key || !connectionSettings.settings.from_email)) {\n    throw new Error('SendGrid not connected');\n  }\n  return { apiKey: connectionSettings.settings.api_key, email: connectionSettings.settings.from_email };\n}\n\nasync function getUncachableSendGridClient() {\n  const { apiKey, email } = await getCredentials();\n  sgMail.setApiKey(apiKey);\n  return { client: sgMail, fromEmail: email };\n}\n\nfunction formatDate(dateStr: string): string {\n  const date = new Date(dateStr + 'T00:00:00');\n  return date.toLocaleDateString('en-US', {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n}\n\nfunction getDayName(dateStr: string): string {\n  const date = new Date(dateStr + 'T00:00:00');\n  return date.toLocaleDateString('en-US', { weekday: 'long' });\n}\n\nfunction getFirstName(fullName: string): string {\n  return fullName.trim().split(/\\s+/)[0];\n}\n\nfunction escapeHtml(str: string): string {\n  return str\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;');\n}\n\ninterface BookingEmailData {\n  name: string;\n  email: string;\n  bookingDate: string;\n  bookingTime: string;\n  meetLink?: string;\n  eventLink?: string;\n}\n\nconst HOST_NAME = 'Plato Team';\nconst HOST_TITLE = 'Customer Success';\nconst HOST_EMAIL = 'hello@platohiring.com';\nconst TIMEZONE = 'EET (Egypt Time, UTC+2)';\nconst RESCHEDULE_URL = 'https://platohiring.com/book-demo';\n\nexport async function sendBookingConfirmation(booking: BookingEmailData) {\n  try {\n    const { client, fromEmail } = await getUncachableSendGridClient();\n    const formattedDate = formatDate(booking.bookingDate);\n    const dayName = getDayName(booking.bookingDate);\n    const firstName = getFirstName(booking.name);\n    const time = booking.bookingTime;\n    const meetLink = booking.meetLink || '';\n    const eventLink = booking.eventLink || '';\n\n    const meetLinkRow = meetLink\n      ? `<tr>\n           <td style=\"padding:6px 0;color:#374151;font-size:15px;line-height:1.7;\">\n             <strong>Meeting link:</strong> <a href=\"${meetLink}\" style=\"color:#0966A8;text-decoration:none;word-break:break-all;\">${meetLink}</a>\n           </td>\n         </tr>`\n      : '';\n\n    const joinButtonHtml = meetLink\n      ? `<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-bottom:16px;\">\n           <tr>\n             <td align=\"center\">\n               <table cellpadding=\"0\" cellspacing=\"0\">\n                 <tr>\n                   <td align=\"center\" style=\"background:#0966A8;border-radius:8px;\">\n                     <a href=\"${meetLink}\" target=\"_blank\" style=\"display:inline-block;padding:14px 36px;color:#ffffff;font-size:15px;font-weight:600;text-decoration:none;\">\n                       Join Google Meet\n                     </a>\n                   </td>\n                 </tr>\n               </table>\n             </td>\n           </tr>\n         </table>`\n      : '';\n\n    const calendarButtonHtml = eventLink\n      ? `<table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-bottom:16px;\">\n           <tr>\n             <td align=\"center\">\n               <table cellpadding=\"0\" cellspacing=\"0\">\n                 <tr>\n                   <td align=\"center\" style=\"background:#ffffff;border:1px solid #d0e3f5;border-radius:8px;\">\n                     <a href=\"${eventLink}\" target=\"_blank\" style=\"display:inline-block;padding:12px 28px;color:#0966A8;font-size:14px;font-weight:600;text-decoration:none;\">\n                       View in Google Calendar\n                     </a>\n                   </td>\n                 </tr>\n               </table>\n             </td>\n           </tr>\n         </table>`\n      : '';\n\n    const msg = {\n      to: booking.email,\n      from: {\n        email: fromEmail,\n        name: 'Plato',\n      },\n      subject: `Your Plato demo is confirmed — ${dayName}, ${formattedDate}`,\n      html: `\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n</head>\n<body style=\"margin:0;padding:0;background-color:#f4f4f5;font-family:Arial,Helvetica,sans-serif;\">\n  <span style=\"display:none;font-size:1px;color:#f4f4f5;line-height:1px;max-height:0;max-width:0;opacity:0;overflow:hidden;\">\n    ${dayName} at ${time} ${TIMEZONE} — 30 min product walkthrough with the Plato team\n  </span>\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#f4f4f5;padding:40px 20px;\">\n    <tr>\n      <td align=\"center\">\n        <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#ffffff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.06);\">\n\n          <!-- Header -->\n          <tr>\n            <td style=\"background:linear-gradient(135deg,#0966A8,#1EA0E2);padding:28px 40px;text-align:center;\">\n              <h1 style=\"color:#ffffff;margin:0;font-size:22px;font-weight:700;letter-spacing:-0.5px;\">Plato</h1>\n            </td>\n          </tr>\n\n          <!-- Body -->\n          <tr>\n            <td style=\"padding:36px 40px 16px;\">\n              <p style=\"color:#111827;margin:0 0 20px;font-size:16px;line-height:1.6;\">\n                Hi ${escapeHtml(firstName)},\n              </p>\n              <p style=\"color:#111827;margin:0 0 24px;font-size:16px;line-height:1.6;\">\n                Your Plato demo is confirmed.\n              </p>\n\n              <!-- Meeting Details Card -->\n              <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#f0f7ff;border-radius:10px;border:1px solid #d0e3f5;margin-bottom:28px;\">\n                <tr>\n                  <td style=\"padding:24px;\">\n                    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                      <tr>\n                        <td style=\"padding:6px 0;color:#374151;font-size:15px;line-height:1.7;\">\n                          <strong>When:</strong> ${dayName}, ${formattedDate} &mdash; ${time} ${TIMEZONE}\n                        </td>\n                      </tr>\n                      <tr>\n                        <td style=\"padding:6px 0;color:#374151;font-size:15px;line-height:1.7;\">\n                          <strong>Duration:</strong> 30 minutes\n                        </td>\n                      </tr>\n                      ${meetLinkRow}\n                      <tr>\n                        <td style=\"padding:6px 0;color:#374151;font-size:15px;line-height:1.7;\">\n                          <strong>Host:</strong> ${HOST_NAME}, ${HOST_TITLE}\n                        </td>\n                      </tr>\n                    </table>\n                  </td>\n                </tr>\n              </table>\n\n              <!-- Join Meeting CTA -->\n              ${joinButtonHtml}\n\n              <!-- What we'll cover -->\n              <p style=\"color:#111827;margin:0 0 12px;font-size:15px;font-weight:600;\">\n                What we'll cover (30 mins):\n              </p>\n              <table cellpadding=\"0\" cellspacing=\"0\" style=\"margin-bottom:24px;\">\n                <tr>\n                  <td style=\"padding:4px 0;color:#374151;font-size:14px;line-height:1.7;\">\n                    &#8226;&nbsp; A quick walkthrough of Plato (candidate flow, scoring, shortlisting)\n                  </td>\n                </tr>\n                <tr>\n                  <td style=\"padding:4px 0;color:#374151;font-size:14px;line-height:1.7;\">\n                    &#8226;&nbsp; How companies use it for volume roles, campus hiring, and tech hiring\n                  </td>\n                </tr>\n                <tr>\n                  <td style=\"padding:4px 0;color:#374151;font-size:14px;line-height:1.7;\">\n                    &#8226;&nbsp; Q&amp;A + next steps\n                  </td>\n                </tr>\n              </table>\n\n              <!-- How to prepare -->\n              <p style=\"color:#111827;margin:0 0 12px;font-size:15px;font-weight:600;\">\n                To get the most out of it, feel free to bring:\n              </p>\n              <table cellpadding=\"0\" cellspacing=\"0\" style=\"margin-bottom:28px;\">\n                <tr>\n                  <td style=\"padding:4px 0;color:#374151;font-size:14px;line-height:1.7;\">\n                    1.&nbsp; A job description you're hiring for (or planning to)\n                  </td>\n                </tr>\n                <tr>\n                  <td style=\"padding:4px 0;color:#374151;font-size:14px;line-height:1.7;\">\n                    2.&nbsp; Your current hiring workflow (even if it's informal)\n                  </td>\n                </tr>\n              </table>\n\n              <!-- View in Calendar -->\n              ${calendarButtonHtml}\n\n              <!-- Reschedule link -->\n              <table cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" style=\"margin-bottom:28px;\">\n                <tr>\n                  <td align=\"center\">\n                    <p style=\"color:#6b7280;font-size:13px;margin:0;\">\n                      Need to change the time?\n                      <a href=\"${RESCHEDULE_URL}\" style=\"color:#0966A8;text-decoration:underline;\">Reschedule or cancel</a>\n                    </p>\n                  </td>\n                </tr>\n              </table>\n\n              <!-- Sign-off -->\n              <table cellpadding=\"0\" cellspacing=\"0\" style=\"margin-bottom:8px;border-top:1px solid #e5e7eb;padding-top:24px;\">\n                <tr>\n                  <td style=\"padding-top:24px;\">\n                    <p style=\"color:#374151;font-size:14px;line-height:1.7;margin:0;\">\n                      See you soon,<br>\n                      <strong>${HOST_NAME}</strong><br>\n                      <span style=\"color:#6b7280;\">${HOST_TITLE} | Plato</span><br>\n                      <span style=\"color:#6b7280;\">\n                        <a href=\"mailto:${HOST_EMAIL}\" style=\"color:#0966A8;text-decoration:none;\">${HOST_EMAIL}</a>\n                      </span>\n                    </p>\n                  </td>\n                </tr>\n              </table>\n            </td>\n          </tr>\n\n          <!-- Footer -->\n          <tr>\n            <td style=\"padding:20px 40px;border-top:1px solid #e5e7eb;text-align:center;\">\n              <p style=\"color:#9ca3af;font-size:11px;margin:0;line-height:1.6;\">\n                &copy; ${new Date().getFullYear()} Plato. All rights reserved. | AI-Powered Hiring Platform\n              </p>\n            </td>\n          </tr>\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`,\n    };\n\n    await client.send(msg);\n    console.log(`Booking confirmation email sent to ${booking.email}`);\n    return true;\n  } catch (error: any) {\n    console.error('Failed to send booking confirmation email:', error?.response?.body || error.message);\n    return false;\n  }\n}\n\ninterface ContactFormData {\n  name: string;\n  email: string;\n  phone?: string;\n  inquiry?: string;\n  message: string;\n  language?: string;\n}\n\nexport async function sendContactFormEmail(data: ContactFormData) {\n  try {\n    const { client, fromEmail } = await getUncachableSendGridClient();\n\n    const msg = {\n      to: 'info@platohiring.com',\n      from: {\n        email: fromEmail,\n        name: 'Plato Website',\n      },\n      replyTo: {\n        email: data.email,\n        name: data.name,\n      },\n      subject: `New Contact Message — ${escapeHtml(data.name)}${data.inquiry ? ` (${escapeHtml(data.inquiry)})` : ''}`,\n      html: `\n<!DOCTYPE html>\n<html>\n<head><meta charset=\"utf-8\"></head>\n<body style=\"margin:0;padding:0;background-color:#f4f4f5;font-family:Arial,Helvetica,sans-serif;\">\n  <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#f4f4f5;padding:40px 20px;\">\n    <tr>\n      <td align=\"center\">\n        <table width=\"600\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#ffffff;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.06);\">\n          <tr>\n            <td style=\"background:linear-gradient(135deg,#0966A8,#1EA0E2);padding:28px 40px;text-align:center;\">\n              <h1 style=\"color:#ffffff;margin:0;font-size:22px;font-weight:700;\">New Contact Form Message</h1>\n            </td>\n          </tr>\n          <tr>\n            <td style=\"padding:36px 40px;\">\n              <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:#f0f7ff;border-radius:10px;border:1px solid #d0e3f5;margin-bottom:24px;\">\n                <tr>\n                  <td style=\"padding:24px;\">\n                    <table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\">\n                      <tr>\n                        <td style=\"padding:6px 0;color:#374151;font-size:15px;line-height:1.7;\">\n                          <strong>Name:</strong> ${escapeHtml(data.name)}\n                        </td>\n                      </tr>\n                      <tr>\n                        <td style=\"padding:6px 0;color:#374151;font-size:15px;line-height:1.7;\">\n                          <strong>Email:</strong> <a href=\"mailto:${escapeHtml(data.email)}\" style=\"color:#0966A8;text-decoration:none;\">${escapeHtml(data.email)}</a>\n                        </td>\n                      </tr>\n                      ${data.phone ? `<tr>\n                        <td style=\"padding:6px 0;color:#374151;font-size:15px;line-height:1.7;\">\n                          <strong>Phone:</strong> ${escapeHtml(data.phone)}\n                        </td>\n                      </tr>` : ''}\n                      ${data.inquiry ? `<tr>\n                        <td style=\"padding:6px 0;color:#374151;font-size:15px;line-height:1.7;\">\n                          <strong>Inquiry Type:</strong> ${escapeHtml(data.inquiry)}\n                        </td>\n                      </tr>` : ''}\n                      ${data.language ? `<tr>\n                        <td style=\"padding:6px 0;color:#374151;font-size:15px;line-height:1.7;\">\n                          <strong>Language:</strong> ${data.language === 'ar' ? 'Arabic' : 'English'}\n                        </td>\n                      </tr>` : ''}\n                    </table>\n                  </td>\n                </tr>\n              </table>\n              <div style=\"margin-bottom:24px;\">\n                <p style=\"color:#111827;font-size:15px;font-weight:600;margin:0 0 8px;\">Message:</p>\n                <p style=\"color:#374151;font-size:14px;line-height:1.7;margin:0;white-space:pre-wrap;\">${escapeHtml(data.message)}</p>\n              </div>\n              <hr style=\"border:none;border-top:1px solid #e5e7eb;margin:24px 0;\">\n              <p style=\"color:#9ca3af;font-size:12px;margin:0;\">\n                You can reply directly to this email to respond to ${escapeHtml(data.name)}.\n              </p>\n            </td>\n          </tr>\n          <tr>\n            <td style=\"padding:20px 40px;border-top:1px solid #e5e7eb;text-align:center;\">\n              <p style=\"color:#9ca3af;font-size:11px;margin:0;\">&copy; ${new Date().getFullYear()} Plato. Contact form submission from platohiring.com</p>\n            </td>\n          </tr>\n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>`,\n    };\n\n    await client.send(msg);\n    console.log(`Contact form email sent for ${data.name} (${data.email})`);\n    return true;\n  } catch (error: any) {\n    console.error('Failed to send contact form email:', error?.response?.body || error.message);\n    return false;\n  }\n}\n\nexport async function sendBookingNotificationToAdmin(booking: BookingEmailData) {\n  try {\n    const { client, fromEmail } = await getUncachableSendGridClient();\n    const formattedDate = formatDate(booking.bookingDate);\n    const time = booking.bookingTime;\n    const meetLink = booking.meetLink || 'Not generated';\n\n    const msg = {\n      to: 'hello@platohiring.com',\n      from: {\n        email: fromEmail,\n        name: 'Plato Booking System',\n      },\n      subject: `New Demo Booking — ${escapeHtml(booking.name)} on ${formattedDate} at ${time}`,\n      html: `\n<div style=\"font-family:Arial,sans-serif;max-width:500px;padding:20px;\">\n  <h2 style=\"color:#0966A8;margin-bottom:16px;\">New Demo Booking</h2>\n  <p><strong>Name:</strong> ${escapeHtml(booking.name)}</p>\n  <p><strong>Email:</strong> <a href=\"mailto:${escapeHtml(booking.email)}\">${escapeHtml(booking.email)}</a></p>\n  <p><strong>Date:</strong> ${formattedDate}</p>\n  <p><strong>Time:</strong> ${time} ${TIMEZONE}</p>\n  <p><strong>Duration:</strong> 30 minutes</p>\n  <p><strong>Meeting link:</strong> <a href=\"${meetLink}\">${meetLink}</a></p>\n  <hr style=\"border:none;border-top:1px solid #e5e7eb;margin:20px 0;\">\n  <p style=\"color:#6b7280;font-size:13px;\">This is an automated notification from the Plato booking system.</p>\n</div>`,\n    };\n\n    await client.send(msg);\n    console.log(`Admin notification email sent for booking by ${booking.name}`);\n    return true;\n  } catch (error: any) {\n    console.error('Failed to send admin notification email:', error?.response?.body || error.message);\n    return false;\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 529, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/src/app/api/contact/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { sendContactFormEmail } from \"@/lib/server/email\";\n\nexport async function POST(req: NextRequest) {\n  const { name, email, phone, inquiry, message, language } = await req.json();\n\n  if (!name || typeof name !== \"string\" || !name.trim()) {\n    return NextResponse.json({ error: \"Name is required.\" }, { status: 400 });\n  }\n  if (!email || typeof email !== \"string\" || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n    return NextResponse.json({ error: \"A valid email is required.\" }, { status: 400 });\n  }\n  if (!message || typeof message !== \"string\" || !message.trim()) {\n    return NextResponse.json({ error: \"Message is required.\" }, { status: 400 });\n  }\n\n  try {\n    const sent = await sendContactFormEmail({\n      name: name.trim(),\n      email: email.trim(),\n      phone: phone?.trim() || undefined,\n      inquiry: inquiry?.trim() || undefined,\n      message: message.trim(),\n      language: language || undefined,\n    });\n\n    if (!sent) {\n      return NextResponse.json({ error: \"Failed to send message. Please try again later.\" }, { status: 500 });\n    }\n\n    return NextResponse.json({ success: true });\n  } catch (err: any) {\n    console.error(\"Contact form error:\", err.message);\n    return NextResponse.json({ error: \"Failed to send message. Please try again later.\" }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAgB;IACzC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;IAEzE,IAAI,CAAC,QAAQ,OAAO,SAAS,YAAY,CAAC,KAAK,IAAI,IAAI;QACrD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAoB,GAAG;YAAE,QAAQ;QAAI;IACzE;IACA,IAAI,CAAC,SAAS,OAAO,UAAU,YAAY,CAAC,6BAA6B,IAAI,CAAC,QAAQ;QACpF,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA6B,GAAG;YAAE,QAAQ;QAAI;IAClF;IACA,IAAI,CAAC,WAAW,OAAO,YAAY,YAAY,CAAC,QAAQ,IAAI,IAAI;QAC9D,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,IAAA,uJAAoB,EAAC;YACtC,MAAM,KAAK,IAAI;YACf,OAAO,MAAM,IAAI;YACjB,OAAO,OAAO,UAAU;YACxB,SAAS,SAAS,UAAU;YAC5B,SAAS,QAAQ,IAAI;YACrB,UAAU,YAAY;QACxB;QAEA,IAAI,CAAC,MAAM;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkD,GAAG;gBAAE,QAAQ;YAAI;QACvG;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAK;IAC3C,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,uBAAuB,IAAI,OAAO;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkD,GAAG;YAAE,QAAQ;QAAI;IACvG;AACF"}}]
}